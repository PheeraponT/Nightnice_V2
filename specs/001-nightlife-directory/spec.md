# Feature Specification: Thailand Nightlife Directory

**Feature Branch**: `001-nightlife-directory`
**Created**: 2026-01-17
**Status**: Draft
**Input**: Web Application สำหรับแสดงร้านอาหารและสถานที่เที่ยวกลางคืนในประเทศไทย

## User Scenarios & Testing *(mandatory)*

### User Story 1 - ค้นหาและดูร้านกลางคืน (Priority: P1)

ผู้ใช้ทั่วไปต้องการค้นหาร้านกลางคืน (บาร์, ผับ, ร้านเหล้า, ร้านอาหารกลางคืน) ในจังหวัดที่ต้องการ สามารถกรองตามประเภทร้านและดูรายละเอียดร้านพร้อมช่องทางติดต่อได้

**Why this priority**: เป็น core functionality หลักของระบบ ถ้าผู้ใช้หาร้านไม่ได้ ระบบไม่มีประโยชน์

**Independent Test**: สามารถทดสอบได้โดยเข้าหน้า Home ค้นหาร้านในกรุงเทพฯ กดเข้าดูรายละเอียดร้าน และกดโทรหาร้านได้

**Acceptance Scenarios**:

1. **Given** ผู้ใช้อยู่ที่หน้า Home, **When** เลือกจังหวัด "กรุงเทพมหานคร" และประเภท "บาร์", **Then** แสดงรายการร้านบาร์ในกรุงเทพฯ ทั้งหมดที่มีสถานะ active
2. **Given** ผู้ใช้ดูรายการร้าน, **When** กดที่ร้านใดร้านหนึ่ง, **Then** แสดงหน้ารายละเอียดร้านพร้อมข้อมูลครบถ้วน (ชื่อ, คำอธิบาย, ที่อยู่, รูปภาพ, ช่องทางติดต่อ)
3. **Given** ผู้ใช้อยู่ที่หน้ารายละเอียดร้าน, **When** กดปุ่มโทร, **Then** ระบบเปิด dialer พร้อมเบอร์ร้าน
4. **Given** ผู้ใช้อยู่ที่หน้ารายละเอียดร้าน, **When** กดปุ่ม Google Map, **Then** ระบบเปิด Google Maps ไปยังพิกัดร้าน
5. **Given** ผู้ใช้อยู่ที่หน้ารายละเอียดร้าน, **When** กดปุ่ม LINE, **Then** ระบบเปิด LINE ไปยัง LINE ID หรือ LINE OA ของร้าน

---

### User Story 2 - เข้าถึงร้านผ่าน Landing Pages (Priority: P2)

ผู้ใช้สามารถเข้าถึงร้านผ่าน URL ที่เป็นมิตรกับ SEO ทั้งแบบรายจังหวัดและรายประเภทร้าน ช่วยให้ค้นพบร้านผ่าน search engine ได้ง่าย

**Why this priority**: เพิ่ม organic traffic และ discoverability ของร้านผ่าน search engines

**Independent Test**: สามารถทดสอบได้โดยเข้า URL `/province/bangkok` หรือ `/category/bar` และเห็นรายการร้านที่เกี่ยวข้อง

**Acceptance Scenarios**:

1. **Given** ผู้ใช้เข้า URL `/province/{province-slug}`, **When** หน้าโหลดเสร็จ, **Then** แสดงรายการร้านทั้งหมดในจังหวัดนั้นพร้อมข้อความแนะนำจังหวัดสำหรับ SEO
2. **Given** ผู้ใช้เข้า URL `/category/{category-slug}`, **When** หน้าโหลดเสร็จ, **Then** แสดงรายการร้านทั้งหมดในประเภทนั้น
3. **Given** ผู้ใช้ดูหน้า Landing รายจังหวัด, **When** มีร้านมากกว่า 20 ร้าน, **Then** แสดง pagination ให้ผู้ใช้เลื่อนดูต่อได้

---

### User Story 3 - ดูร้านใกล้เคียง (Priority: P3)

เมื่อผู้ใช้ดูรายละเอียดร้านใดร้านหนึ่ง ระบบแสดงร้านใกล้เคียงให้เลือกดูต่อ เพิ่มโอกาส discovery

**Why this priority**: เพิ่ม engagement และช่วยให้ผู้ใช้ค้นพบร้านใหม่ๆ

**Independent Test**: สามารถทดสอบได้โดยเข้าหน้ารายละเอียดร้านและตรวจสอบว่ามี section ร้านใกล้เคียงแสดง

**Acceptance Scenarios**:

1. **Given** ผู้ใช้อยู่ที่หน้ารายละเอียดร้าน, **When** ร้านมีพิกัด latitude/longitude, **Then** แสดงรายการร้านใกล้เคียง (ภายในรัศมี 5 กิโลเมตร) สูงสุด 6 ร้าน
2. **Given** ผู้ใช้เห็นร้านใกล้เคียง, **When** กดที่ร้านใกล้เคียง, **Then** นำทางไปยังหน้ารายละเอียดร้านนั้น

---

### User Story 4 - ลงโฆษณาร้าน (Priority: P4)

เจ้าของร้านหรือผู้ลงโฆษณาต้องการโปรโมทร้านให้เข้าถึงลูกค้ามากขึ้น สามารถดูแพ็กเกจโฆษณาและติดต่อลงโฆษณาได้

**Why this priority**: เป็น revenue stream หลักของระบบ แต่ต้องมี content (ร้าน) และ traffic ก่อน

**Independent Test**: สามารถทดสอบได้โดยเข้าหน้า Advertise ดูแพ็กเกจและกรอกฟอร์มติดต่อ

**Acceptance Scenarios**:

1. **Given** ผู้ใช้เข้าหน้า Advertise, **When** หน้าโหลดเสร็จ, **Then** แสดงรายการแพ็กเกจโฆษณา (Banner, Sponsored Store Card, Featured Store) พร้อมราคาและรายละเอียด
2. **Given** ผู้ใช้ต้องการลงโฆษณา, **When** กรอกฟอร์มติดต่อครบถ้วน (ชื่อ, เบอร์โทร, อีเมล, ข้อความ), **Then** ระบบบันทึกข้อมูลและแสดงข้อความยืนยันว่าได้รับข้อมูลแล้ว

---

### User Story 5 - แสดงโฆษณาตามเป้าหมาย (Priority: P5)

ระบบแสดงโฆษณาที่ตรงกับบริบทของผู้ใช้ (จังหวัด, ประเภทร้าน, ช่วงเวลา) และเก็บข้อมูล impression/click

**Why this priority**: เพิ่มมูลค่าให้ผู้ลงโฆษณาและช่วยวัดผล ROI

**Independent Test**: สามารถทดสอบได้โดยสร้างโฆษณาที่ target กรุงเทพฯ แล้วเข้าหน้า Landing กรุงเทพฯ ดูว่าโฆษณาแสดงหรือไม่

**Acceptance Scenarios**:

1. **Given** มีโฆษณา Banner ที่ target จังหวัดกรุงเทพฯ และอยู่ในช่วงเวลาที่กำหนด, **When** ผู้ใช้เข้าหน้า Landing กรุงเทพฯ, **Then** แสดง Banner โฆษณานั้น
2. **Given** มีโฆษณา Featured Store ที่ target ประเภท "บาร์", **When** ผู้ใช้เข้าหน้า Landing ประเภทบาร์, **Then** ร้านที่โฆษณาแสดงในตำแหน่งโดดเด่น (ด้านบนหรือมี badge)
3. **Given** โฆษณาแสดงบนหน้าจอ, **When** ผู้ใช้เห็นโฆษณา, **Then** ระบบบันทึก impression
4. **Given** โฆษณาแสดงบนหน้าจอ, **When** ผู้ใช้กดโฆษณา, **Then** ระบบบันทึก click และนำทางไปยังเป้าหมาย

---

### User Story 6 - จัดการข้อมูลร้าน (Admin) (Priority: P6)

แอดมินต้องการจัดการข้อมูลร้าน (เพิ่ม, แก้ไข, ลบ, ดูรายการ) ได้อย่างสะดวก

**Why this priority**: จำเป็นสำหรับ content management แต่สามารถใช้ manual process ได้ในช่วงแรก

**Independent Test**: สามารถทดสอบได้โดย login เป็น Admin สร้างร้านใหม่ และดูว่าร้านแสดงบนหน้าเว็บ

**Acceptance Scenarios**:

1. **Given** แอดมินอยู่ที่หน้าจัดการร้าน, **When** กดปุ่มเพิ่มร้านและกรอกข้อมูลครบ, **Then** ระบบสร้างร้านใหม่และแสดงในรายการ
2. **Given** แอดมินอยู่ที่หน้าจัดการร้าน, **When** กดแก้ไขร้านและเปลี่ยนข้อมูล, **Then** ระบบบันทึกการเปลี่ยนแปลง
3. **Given** แอดมินอยู่ที่หน้าจัดการร้าน, **When** เปลี่ยนสถานะร้านเป็น inactive, **Then** ร้านไม่แสดงบนหน้าเว็บสำหรับผู้ใช้ทั่วไป
4. **Given** แอดมินอยู่ที่หน้าจัดการร้าน, **When** กดลบร้าน, **Then** ระบบลบร้านออกจากระบบ (หรือ soft delete)

---

### User Story 7 - จัดการจังหวัดและประเภทร้าน (Admin) (Priority: P7)

แอดมินต้องการจัดการรายการจังหวัดและประเภทร้านที่ใช้ในระบบ

**Why this priority**: Master data management ที่จำเป็นแต่ไม่ต้องเปลี่ยนบ่อย

**Independent Test**: สามารถทดสอบได้โดยเพิ่มจังหวัดใหม่และดูว่าปรากฏใน dropdown ที่หน้า Home

**Acceptance Scenarios**:

1. **Given** แอดมินอยู่ที่หน้าจัดการจังหวัด, **When** เพิ่มจังหวัดใหม่พร้อมชื่อและ slug, **Then** จังหวัดปรากฏในตัวเลือกบนหน้าเว็บ
2. **Given** แอดมินอยู่ที่หน้าจัดการประเภทร้าน, **When** เพิ่มประเภทใหม่, **Then** ประเภทปรากฏในตัวเลือกบนหน้าเว็บ

---

### User Story 8 - จัดการโฆษณา (Admin) (Priority: P8)

แอดมินต้องการสร้าง แก้ไข และติดตามผลโฆษณา

**Why this priority**: จำเป็นเมื่อมีผู้ลงโฆษณา แต่สามารถรอได้จนกว่าจะมี traffic

**Independent Test**: สามารถทดสอบได้โดยสร้างโฆษณา Banner ใหม่ กำหนด target และดูว่าแสดงบนหน้าเว็บ

**Acceptance Scenarios**:

1. **Given** แอดมินอยู่ที่หน้าจัดการโฆษณา, **When** สร้างโฆษณา Banner ใหม่พร้อมรูป, target (จังหวัด/ประเภท), และช่วงเวลา, **Then** โฆษณาปรากฏบนหน้าเว็บตามเงื่อนไข
2. **Given** แอดมินอยู่ที่หน้าจัดการโฆษณา, **When** ดูรายงานโฆษณา, **Then** แสดงจำนวน impression และ click ของแต่ละโฆษณา

---

### Edge Cases

- จะเกิดอะไรขึ้นเมื่อค้นหาร้านแล้วไม่พบผลลัพธ์? แสดงข้อความ "ไม่พบร้านที่ตรงกับเงื่อนไข" พร้อมแนะนำให้ลองเปลี่ยนตัวกรอง
- จะจัดการอย่างไรเมื่อร้านไม่มีเบอร์โทร/LINE? ซ่อนปุ่มที่เกี่ยวข้อง
- จะเกิดอะไรขึ้นเมื่อโฆษณาหมดอายุ (พ้นช่วงเวลา)? ไม่แสดงโฆษณานั้นและแสดงโฆษณาอื่นแทน (ถ้ามี)
- จะจัดการอย่างไรเมื่อรูปภาพร้านโหลดไม่ได้? แสดงรูป placeholder
- จะเกิดอะไรขึ้นเมื่อมีโฆษณาหลายตัวที่ตรงเงื่อนไข? แสดงแบบสุ่มหรือตามลำดับความสำคัญที่กำหนด

## Requirements *(mandatory)*

### Functional Requirements

**การแสดงผลร้าน**
- **FR-001**: ระบบต้องแสดงรายการร้านที่มีสถานะ active บนหน้า Home และ Landing pages
- **FR-002**: ระบบต้องรองรับการค้นหาร้านด้วยคำค้น (ชื่อร้าน, คำอธิบาย)
- **FR-003**: ระบบต้องรองรับการกรองร้านตามจังหวัดและประเภทร้าน
- **FR-004**: ระบบต้องแสดงร้านแนะนำ/โปรโมทบนหน้า Home
- **FR-005**: ระบบต้องแสดงร้านใกล้เคียงบนหน้ารายละเอียดร้าน (ภายในรัศมี 5 กม. สูงสุด 6 ร้าน)

**หน้ารายละเอียดร้าน**
- **FR-006**: ระบบต้องแสดงข้อมูลร้านครบถ้วน: Logo, Banner, Gallery, ชื่อ, คำอธิบาย, เบอร์โทร, ที่อยู่, ประเภท, พิกัด, Google Map URL, LINE, Facebook, Instagram, เวลาเปิด-ปิด, ช่วงราคา, facilities
- **FR-007**: ระบบต้องมีปุ่มกดโทรที่เปิด dialer ด้วยเบอร์ร้าน
- **FR-008**: ระบบต้องมีปุ่มเปิด Google Map ที่นำทางไปยังพิกัดร้าน
- **FR-009**: ระบบต้องมีปุ่มแอด LINE ที่เปิด LINE ไปยัง LINE ID/OA ของร้าน

**Landing Pages**
- **FR-010**: ระบบต้องมีหน้า Landing รายจังหวัดที่มี URL เป็น `/province/{slug}`
- **FR-011**: ระบบต้องมีหน้า Landing รายประเภทที่มี URL เป็น `/category/{slug}`
- **FR-012**: หน้า Landing รายจังหวัดต้องมีข้อความแนะนำจังหวัดสำหรับ SEO

**ระบบโฆษณา**
- **FR-013**: ระบบต้องรองรับโฆษณา 3 ประเภท: Banner, Sponsored Store Card, Featured Store
- **FR-014**: ระบบต้องรองรับการ target โฆษณาตามจังหวัด ประเภทร้าน และช่วงเวลา
- **FR-015**: ระบบต้องบันทึก impression เมื่อโฆษณาแสดงบนหน้าจอ
- **FR-016**: ระบบต้องบันทึก click เมื่อผู้ใช้กดโฆษณา
- **FR-017**: หน้า Advertise ต้องแสดงแพ็กเกจโฆษณาและมีฟอร์มติดต่อ

**ระบบหลังบ้าน (Admin)**
- **FR-018**: แอดมินต้องสามารถ CRUD ข้อมูลร้าน
- **FR-019**: แอดมินต้องสามารถจัดการจังหวัด (เพิ่ม, แก้ไข, ลบ)
- **FR-020**: แอดมินต้องสามารถจัดการประเภทร้าน (เพิ่ม, แก้ไข, ลบ)
- **FR-021**: แอดมินต้องสามารถจัดการโฆษณา (สร้าง, แก้ไข, ดูรายงาน impression/click)

### Key Entities

- **Store (ร้าน)**: เป็นข้อมูลหลักของร้านกลางคืน ประกอบด้วย:
  - logo image, banner image, gallery images (รูปภาพเพิ่มเติม)
  - ชื่อร้าน, คำอธิบาย, slug
  - เบอร์โทร, ที่อยู่ (text), จังหวัด
  - ประเภทร้าน (เลือกได้หลายประเภท)
  - latitude/longitude, Google Map URL
  - LINE/LINE OA, Facebook, Instagram (social links)
  - เวลาเปิด-ปิด (operating hours) — รองรับเวลาข้ามวัน เช่น 18:00-02:00
  - ช่วงราคา (price range): $, $$, $$$, $$$$
  - facilities/amenities: ที่จอดรถ, live music, karaoke, outdoor seating, etc.
  - สถานะ (active/inactive)
  - วันที่สร้าง, วันที่อัปเดตล่าสุด

- **Province (จังหวัด)**: รายการจังหวัดในประเทศไทยที่ใช้จัดกลุ่มร้าน ประกอบด้วย ชื่อ, slug, ภูมิภาค, ข้อความแนะนำสำหรับ SEO — ข้อมูล seed 77 จังหวัดทั้งหมดพร้อมแบ่งภูมิภาค (กลาง, เหนือ, อีสาน, ตะวันออก, ตะวันตก, ใต้)

- **Category (ประเภทร้าน)**: ประเภทของร้าน ประกอบด้วย ชื่อ, slug — ข้อมูล seed 4 ประเภท: ร้านเหล้า, บาร์, ผับ, ร้านอาหารกลางคืน (Admin สามารถเพิ่ม/ลบ/แก้ไขได้) ร้านหนึ่งสามารถมีหลายประเภท (many-to-many)

- **Advertisement (โฆษณา)**: ข้อมูลโฆษณา ประกอบด้วย ประเภท (Banner/Sponsored/Featured), รูปภาพ, target (จังหวัด/ประเภท), ช่วงเวลาแสดง, ร้านที่เกี่ยวข้อง (ถ้ามี) — การคิดราคาเป็นแบบ manual (ติดต่อทีมงานตกลงราคาเป็นรายครั้ง ไม่มีระบบ billing อัตโนมัติ)

- **AdMetric (ข้อมูลโฆษณา)**: บันทึก impression และ click ของโฆษณา ประกอบด้วย โฆษณา, ประเภท (impression/click), timestamp

- **ContactInquiry (ข้อมูลติดต่อ)**: ข้อมูลจากฟอร์มติดต่อลงโฆษณา ประกอบด้วย ชื่อ, เบอร์โทร, อีเมล, ข้อความ, timestamp

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: ผู้ใช้สามารถค้นหาและดูรายละเอียดร้านได้ภายใน 3 คลิกจากหน้า Home
- **SC-002**: 90% ของผู้ใช้สามารถหาร้านในจังหวัดที่ต้องการได้สำเร็จในครั้งแรก
- **SC-003**: หน้า Landing แต่ละหน้าโหลดและแสดงผลภายใน 2 วินาที
- **SC-004**: ระบบรองรับการแสดงร้านได้อย่างน้อย 10,000 ร้านโดยไม่กระทบประสิทธิภาพการค้นหา
- **SC-005**: แอดมินสามารถเพิ่มร้านใหม่ได้ภายใน 5 นาที
- **SC-006**: โฆษณาแสดงตรงตาม target ที่กำหนด 100% (จังหวัด, ประเภท, ช่วงเวลา)
- **SC-007**: ระบบบันทึก impression และ click ของโฆษณาได้ครบถ้วน (ไม่ต่ำกว่า 99%)

## Assumptions

- ข้อมูลจังหวัดจะใช้ 77 จังหวัดในประเทศไทยครบทั้งหมด พร้อมแบ่งภูมิภาค 6 ภาค (กลาง, เหนือ, อีสาน, ตะวันออก, ตะวันตก, ใต้) — ข้อมูล seed จาก Google Sheet
- ประเภทร้านเริ่มต้นมี 4 ประเภท: ร้านเหล้า, บาร์, ผับ, ร้านอาหารกลางคืน — Admin สามารถเพิ่ม/ลบ/แก้ไขประเภทได้ และร้านหนึ่งสามารถมีได้หลายประเภท
- การคำนวณร้านใกล้เคียงใช้ระยะทางแบบ Haversine formula โดยใช้รัศมี 5 กิโลเมตรเป็นค่าเริ่มต้น
- ระบบไม่มี user registration สำหรับผู้ใช้ทั่วไป (public access)
- Admin access จะใช้ authentication แบบ username/password
- การอัปโหลดรูปภาพจะจำกัดขนาดไฟล์สูงสุด 5MB และรองรับ format: JPG, PNG, WebP
- SEO metadata (title, description, og:image) จะถูก generate อัตโนมัติจากข้อมูลร้าน/จังหวัด
- ฟอร์มติดต่อลงโฆษณาจะส่งการแจ้งเตือนไปยังแอดมินทางอีเมล

## Clarifications

### Session 2026-01-17

- Q: รูปแบบการคิดราคาโฆษณาเป็นอย่างไร? → A: คิดราคาแบบ manual (ติดต่อทีมงาน ตกลงราคาเป็นรายครั้ง)
- Q: จังหวัดเริ่มต้นที่ต้องมีข้อมูล (Seed Data)? → A: 77 จังหวัดทั้งหมด พร้อมแยกภูมิภาคให้ชัดเจน (ข้อมูลมีอยู่ใน Google Sheet แยก tab)
- Q: ระบบสมัครสมาชิกสำหรับร้านค้าจำเป็นหรือไม่? → A: ไม่มีระบบสมาชิกร้านค้า — Admin จัดการข้อมูลร้านทั้งหมด
- Q: ประเภทร้านมีอะไรบ้างและจัดการอย่างไร? → A: 4 ประเภทเริ่มต้น (ร้านเหล้า, บาร์, ผับ, ร้านอาหารกลางคืน) Admin จัดการเพิ่ม/ลบ/แก้ไขได้ และร้านหนึ่งมีได้หลายประเภท
- Q: ข้อมูลร้านที่ต้องเพิ่มเติม? → A: เพิ่ม gallery images, Facebook/Instagram, เวลาเปิด-ปิด (รองรับข้ามวัน), ช่วงราคา ($-$$$$), facilities (ที่จอดรถ, live music, karaoke, outdoor seating, etc.)

## Out of Scope

- ระบบ user registration และ login สำหรับผู้ใช้ทั่วไป
- ระบบสมัครสมาชิกสำหรับร้านค้า (ร้านค้าไม่สามารถจัดการข้อมูลตัวเองได้ — Admin จัดการทั้งหมด)
- ระบบรีวิวและให้คะแนนร้าน
- ระบบจองโต๊ะ
- ระบบชำระเงินออนไลน์สำหรับค่าโฆษณา
- Mobile application (native iOS/Android)
- Multi-language support (รองรับเฉพาะภาษาไทย)
- Real-time chat กับร้าน
- การแจ้งเตือน push notification
